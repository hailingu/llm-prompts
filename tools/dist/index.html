<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>"Chart Test" - Reveal POC</title>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4/dist/reveal.css">
  <link rel="stylesheet" href="theme.css">
</head>
<body>
  <div class="reveal">
    <div class="slides">
      <section class="bullets card"><h3 class="h-title">Sales by Quarter</h3><ul class="body-large"><li>Demo chart</li></ul><div class="chart-wrapper"><figure role="group" aria-labelledby="chart-1-caption"><div class="canvas-container"><canvas id="chart-1" class="chart-canvas" data-chart-config="%7B%22type%22%3A%22bar%22%2C%22data%22%3A%7B%22labels%22%3A%5B%22Q1%22%2C%22Q2%22%2C%22Q3%22%2C%22Q4%22%5D%2C%22datasets%22%3A%5B%7B%22label%22%3A%22Sales%22%2C%22data%22%3A%5B120%2C150%2C180%2C210%5D%2C%22backgroundColor%22%3A%22%232563EB%22%2C%22borderColor%22%3A%22%232563EB%22%7D%5D%7D%2C%22options%22%3A%7B%22plugins%22%3A%7B%22legend%22%3A%7B%22display%22%3Atrue%7D%7D%7D%7D" role="img" aria-label="Sales per quarter" aria-describedby="chart-1-data" aria-labelledby="chart-1-caption"></canvas></div><div class="visually-hidden"><table id="chart-1-data" class="chart-data" aria-label="Sales per quarter"><thead><tr><th>Item</th><th>Sales</th></tr></thead><tbody><tr><td>Q1</td><td>120</td></tr><tr><td>Q2</td><td>150</td></tr><tr><td>Q3</td><td>180</td></tr><tr><td>Q4</td><td>210</td></tr></tbody></table></div><figcaption id="chart-1-caption" class="visually-hidden">Data table for Sales per quarter</figcaption></figure></div></section>
    </div>
  </div>
  <script src="https://unpkg.com/reveal.js@4/dist/reveal.js"></script>
  <!-- Chart.js for data visualization -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Mermaid (client-side fallback if CLI not available) -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <script>
    function initCharts() {
      const configs = document.querySelectorAll('canvas.chart-canvas');
      configs.forEach(c => {
        try {
          const raw = c.getAttribute('data-chart-config');
          if (!raw) return;
          const cfgStr = decodeURIComponent(raw);
          const cfg = JSON.parse(cfgStr);
          cfg.options = cfg.options || {};
          cfg.options.responsive = true;
          cfg.options.maintainAspectRatio = false;
          new Chart(c.getContext('2d'), cfg);
        } catch (e) {
          console.warn('Chart init failed', e);
        }
      });
    }

    function initMermaid() {
      try {
        if (window.mermaid && typeof window.mermaid.initialize === 'function') {
          window.mermaid.initialize({ startOnLoad: true, theme: 'default' });
        }
      } catch (e) {
        console.warn('Mermaid init failed', e);
      }
    }

    if (window.Reveal && Reveal.isReady) { initCharts(); initMermaid(); } else {
      window.addEventListener('DOMContentLoaded', () => { initCharts(); initMermaid(); });
    }
  </script>
  <script>Reveal.initialize({hash:true});</script>
</body>
</html>